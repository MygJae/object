# 간략한 내용 정리

# 4 설계 품질과 트레이드오프
- 객체지향 설계의 핵심은 책임임
- 책임을 할당하는 작업이 응집도와 결합도 같은 설계 품질과 깊이 연관돼 있음

## 4-1 데이터 중심의 영화 예매 시스템
- 객체지향 설계의 두 가지 방법
    - 상태(=데이터)를 분할의 중심축으로 삼음
    - 책임을 분할의 중심축으로 삼음
- 데이터 중심 관점은 객체는 자신이 포함하고 있는 데이터를 조작하는 데 필요한 오퍼레이션을 정의함
- 책임 중심의 관점은 객체는 다른 객체가 요청할 수 있는 오퍼레이션을 위해 필요한 상태를 보관함
- 객체의 상태 = 구현
- 객체의 책임 = 인터페이스

### 데이터를 준비하자
- 데이터 중심의 설계는 객체가 포함해야 하는 데이터에 집중함
- 캡슐화를 지키기 위해 내부의 데이터를 반환하는 접근자(accessor)와 데이터를 변경하는 수정자(mutator)를 추가함

### 영화를 예매하자
- 데이터 중심의 설계는 할인 정책 타입에 따라 할인 요금을 계싼하는 로직을 분기해야 함

## 4-2 설계 트레이드오프
### 캡슐화
- 구현은 나중에 변경될 가능성이 높은 어떤 것임
- 인터페이스는 상대적으로 안정적인 부분임
- 객체지향은 파급효과를 적절하게 조절할 수 있음
- 캡슐화는 외부에서 알 필요가 없는 부분을 감춤으로써 대상을 단순화하는 추상화의 한 종류임

### 응집도와 결합도
- 응집도는 모듈에 포함된 내부 요소들이 연관돼 있는 정도
- 결합도는 의존성의 정도를 나타내며 다른 모듈에 대해 얼마나 많은 지식을 갖고 있는지를 나타냄
- 애플리케이션의 구성 요소들이 느슨하게 결합돼있어야 좋은 설계를 가졌다고 봄
- 변경의 관점에서 응집도란 변경이 발생할 때 모듈 내부에서 발생하는 변경의 정도임
- 변경의 관점에서 결합도란 한 모듈이 변경되기 위해서 다른 모듈의 변경을 요구하는 정도임

## 4-3 데이터 중심의 영화 예매 시스템의 문제점
### 캡슐화 위반
- 접근자(getter)와 수정자(setter)는 캡슐화를 지키는 것처럼 보이지만 사실 메서드 자체에 해당 인스턴스 변수가 존재한다는 사실이 퍼블릭 인터페이스에 노골적으로 드러남(캡슐화가 아님)
- 접근자와 수정자에 과도하게 의존하는 설계를 추측에 의한 설계 전략(design-by-guessing strategy)라 부름

### 높은 결합도
- getter를 호출하는 것은 해당 필드의 가시성을 private 에서 public으로 변경하는 것과 거의 동일함
- 결합도 측면에서 데이터 중심 설계는 여러 데이터 객체들을 사용하는 제어 로직이 특정 객체 안에 집중되기 때문에 하나의 제어 객체가 다수의 데이터 객체에 강하게 결합됨(ReservationAgency)

### 낮은 응집도
- 어떤 요구사항 변경을 수용하기 위해 하나 이상의 클래스를 수정해햐 하는 것은 설계의 응집도가 낮은거임

## 4-4 자율적인 객체를 향해
### 캡슐화를 지켜라
- 객체는 스스로의 상태를 책임져야 하며 외부에서는 인터페이스에 정의된 메서드를 통해서만 상태에 접근할 수 있음
- 메서드는 단순히 접근자, 수정자를 의미하는게 아니라 객체가 책임져야 하는 무언가를 수행하는 것임
- 단순 접근자, 수정자는 코드 중복이 발생할 확률이 높으며 변경에 취약해짐

### 스스로 자신의 데이터를 책임지는 객체
- 객체 내부에 저장되는 데이터보다 객체가 협력에 참여하면서 수행할 책임을 정의하는 오퍼레이션이 더 중요함

## 4-5 하지만 여전히 부족하다
### 캡슐화 위반
- 내부의 구현 변경이 외부로 퍼져나가는 파급 효과(ripple effect)는 캡슐화가 부족하다는 명백한 증거임
- 할인정책 별로 메서드가 3개나 존재하는 것은 내부 구현을 인터페이스에 노출하고 있다는 것임

### 높은 결합도
- 내부 구현이 제대로 캡슐화하지 못했기 때문에 서로 결합도가 높아지게 됨

### 낮은 응집도
- 하나의 변경을 수행하기 위해 여러 곳을 동시에 변경해야 하면 응집도가 낮다는 증거임


## 4-6 데이터 중심 설계의 문제점
### 데이터 중심 설계는 객체의 행동보다는 상태에 초점을 맞춘다
- 데이터 주도 설계는 처음부터 데이터에 관해 결정하도록 강요하기 때문에 너무 이른 시기에 내부 구현에 초점을 맞추게 함 -> 캡슐화 실패

### 데이터 중심 설계는 객체를 고립시킨 채 오퍼레이션을 정의하도록 만든다
- 협력이라는 문맥 안에서 필요한 책임을 결정하고 이를 수행할 적절한 객체를 결정하는 것이 가장 중요함
- 객체지향의 무게 중심은 내부가 아니라 외부에 맞춰져 있어야 함

# 읽고 느낀 점
- 지금까지 내가 해왔던 설계는 데이터 중심의 설계와 비슷하다고 느껴졌다.
- 자바라는 언어를 사용하면서 객체지향적이 아닌 절차지향적으로 코드를 배치하고 있었다.
- 요즘 객체지향적으로 설계를 하면서 느끼는 점은 과연 데이터 중심의 설계에서 완벽하게 벗어 날 수 있으까? 라는 생각을 하게된다.
- 결국 대부분은 데이터베이스를 사용하게되고 데이터 테이블들을 정의하게 되는데 둘 사이의 간극을 어떻게 좁힐지에 대해 고민을 해봐야겠다. 